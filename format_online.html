

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Online queries &mdash; ATpy v0.9.4 documentation</title>
    <link rel="stylesheet" href="_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.9.4',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="ATpy v0.9.4 documentation" href="index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="index.html">ATpy v0.9.4 documentation</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/atpy_logo.png" alt="Logo"/>
            </a></p>
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Online queries</a><ul>
<li><a class="reference internal" href="#virtual-observatory">Virtual Observatory</a></li>
<li><a class="reference internal" href="#irsa-query">IRSA Query</a></li>
<li><a class="reference internal" href="#full-api-for-advanced-users">Full API for advanced users</a></li>
</ul>
</li>
</ul>

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/format_online.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="online-queries">
<span id="format-hdf5"></span><h1>Online queries<a class="headerlink" href="#online-queries" title="Permalink to this headline">¶</a></h1>
<p>It is possible to query online databases and automatically return the results
as a <tt class="docutils literal"><span class="pre">Table</span></tt> instance. There are several mechanisms for accessing online
catalogs:</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The features described on this page require the latest version of
the <a class="reference external" href="https://github.com/atpy/atpy/tree/vo">vo branch</a> of ATpy.</p>
</div>
<div class="section" id="virtual-observatory">
<h2>Virtual Observatory<a class="headerlink" href="#virtual-observatory" title="Permalink to this headline">¶</a></h2>
<p>An interface to the virtual observatory is provided via the <a class="reference external" href="https://trac6.assembla.com/astrolib">vo</a> module. To list the catalogs
available, use the <tt class="docutils literal"><span class="pre">list_catalogs()</span></tt> method from <tt class="docutils literal"><span class="pre">atpy.vo_conesearch</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">atpy.vo_conesearch</span> <span class="kn">import</span> <span class="n">list_catalogs</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">list_catalogs</span><span class="p">()</span>
<span class="go">           USNO-A2</span>
<span class="go">           USNO-B1</span>
<span class="go">        USNO NOMAD</span>
<span class="go">          USNO ACT</span>
</pre></div>
</div>
<p>A specific catalog can then be queried with a conesearch by specifying a
catalog, and the coordinates and radius (in degrees) to search:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">t</span> <span class="o">=</span> <span class="n">atpy</span><span class="o">.</span><span class="n">Table</span><span class="p">(</span><span class="n">catalog</span><span class="o">=</span><span class="s">&#39;USNO-B1&#39;</span><span class="p">,</span> <span class="n">ra</span><span class="o">=</span><span class="mf">233.112</span><span class="p">,</span> <span class="n">dec</span><span class="o">=</span><span class="mf">23.432</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>
</pre></div>
</div>
<p>How long this query takes will depend on the speed of your network, the load
on the server being queried, and the number of rows in the result. For
advanced users, it is also possible to query catalogs not listed by
<tt class="docutils literal"><span class="pre">list_catalogs()</span></tt> - for more details, see the <a class="reference internal" href="#fullapi"><em>Full API for advanced users</em></a>.</p>
</div>
<div class="section" id="irsa-query">
<h2>IRSA Query<a class="headerlink" href="#irsa-query" title="Permalink to this headline">¶</a></h2>
<p>In addition to supporting Virtual Observatory queries, ATpy supports queries
to the <a class="reference external" href="http://irsa.ipac.caltech.edu/">NASA/IPAC Infrared Science Archive (IRSA)</a>. The interface is similar to that of the VO.  To list the catalogs
available, use the <tt class="docutils literal"><span class="pre">list_catalogs()</span></tt> method from <tt class="docutils literal"><span class="pre">atpy.irsa_service</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">atpy.irsa_service</span> <span class="kn">import</span> <span class="n">list_catalogs</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">list_catalogs</span><span class="p">()</span>
<span class="go">            fp_psc  2MASS All-Sky Point Source Catalog (PSC)</span>
<span class="go">            fp_xsc  2MASS All-Sky Extended Source Catalog (XSC)</span>
<span class="go">            lga_v2  The 2MASS Large Galaxy Atlas</span>
<span class="go">       fp_scan_dat  2MASS All-Sky Survey Scan Info</span>
<span class="go">               ...  ...</span>
</pre></div>
</div>
<p>The first column is the catalog code used in the query. A specific catalog can then be queried by specifying a
query type, a catalog,  and additional arguments as required. The different kinds of search are:</p>
<ul>
<li><p class="first"><tt class="docutils literal"><span class="pre">Cone</span></tt>: This is a cone search. Requires <tt class="docutils literal"><span class="pre">objstr</span></tt>, a string containing
either coordinates or an object name (see <a class="reference external" href="http://irsa.ipac.caltech.edu/search_help.html">here</a> for more information),
and <tt class="docutils literal"><span class="pre">radius</span></tt>, with units given by <tt class="docutils literal"><span class="pre">units</span></tt> (<tt class="docutils literal"><span class="pre">'arcsec'</span></tt> by
default). For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">t</span> <span class="o">=</span> <span class="n">atpy</span><span class="o">.</span><span class="n">Table</span><span class="p">(</span><span class="s">&#39;Cone&#39;</span><span class="p">,</span> <span class="s">&#39;fp_psc&#39;</span><span class="p">,</span> <span class="n">objstr</span><span class="o">=</span><span class="s">&#39;m13&#39;</span><span class="p">,</span> \
<span class="go">                   radius=100., type=&#39;irsa&#39;)</span>
</pre></div>
</div>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">Box</span></tt>: This is a box search. Requires <tt class="docutils literal"><span class="pre">objstr</span></tt>, a string containing
either coordinates or an object name (see <a class="reference external" href="http://irsa.ipac.caltech.edu/search_help.html">here</a> for more
information), and <tt class="docutils literal"><span class="pre">size</span></tt> in arcseconds. For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">t</span> <span class="o">=</span> <span class="n">atpy</span><span class="o">.</span><span class="n">Table</span><span class="p">(</span><span class="s">&#39;Box&#39;</span><span class="p">,</span> <span class="s">&#39;fp_psc&#39;</span><span class="p">,</span> <span class="n">objstr</span><span class="o">=</span><span class="s">&#39;T Tau&#39;</span><span class="p">,</span> \
<span class="go">                   size=200., units=&#39;deg&#39;, type=&#39;irsa&#39;)</span>
</pre></div>
</div>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">Polygon</span></tt>: This is a polygon search. Requires <tt class="docutils literal"><span class="pre">polygon</span></tt>, which should be
a list of tuples of (ra, dec) in decimal degrees:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">t</span> <span class="o">=</span> <span class="n">atpy</span><span class="o">.</span><span class="n">Table</span><span class="p">(</span><span class="s">&#39;polygon&#39;</span><span class="p">,</span><span class="s">&#39;fp_psc&#39;</span><span class="p">,</span> \
<span class="go">                   polygon=[(11.0, 45.0), (12.0, 45.0), (11.5, 46.)], \</span>
<span class="go">                   type=&#39;irsa&#39;)</span>
</pre></div>
</div>
</li>
</ul>
<p>As for the VO query, how long these queries takes will depend on the speed of
your network, the load on the IRSA server, and the number of rows in the
result.</p>
</div>
<div class="section" id="full-api-for-advanced-users">
<span id="fullapi"></span><h2>Full API for advanced users<a class="headerlink" href="#full-api-for-advanced-users" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The following functions should not be called directly - the arguments
should be passed to <tt class="docutils literal"><span class="pre">Table()/Table.read()</span></tt>, <tt class="docutils literal"><span class="pre">Table.write()</span></tt>,
<tt class="docutils literal"><span class="pre">TableSet()/TableSet.read()</span></tt>, and <tt class="docutils literal"><span class="pre">TableSet.write()</span></tt> respectively.</p>
</div>
<dl class="function">
<dt id="atpy.vo_conesearch.read">
<tt class="descclassname">atpy.vo_conesearch.</tt><tt class="descname">read</tt><big>(</big><em>self</em>, <em>catalog=None</em>, <em>ra=None</em>, <em>dec=None</em>, <em>radius=None</em>, <em>verb=1</em>, <em>pedantic=False</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#atpy.vo_conesearch.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Query a VO catalog using the STScI vo module</p>
<p>This docstring has been adapted from the STScI vo conesearch module:</p>
<blockquote>
<div><p><em>catalog</em> [ None | string | VOSCatalog | list ]</p>
<blockquote>
<div><p>May be one of the following, in order from easiest to use to most
control:</p>
<ul class="simple">
<li>None: A database of conesearch catalogs is downloaded from
STScI. The first catalog in the database to successfully return
a result is used.</li>
<li>catalog name: A name in the database of conesearch catalogs at
STScI is used. For a list of acceptable names, see
vo_conesearch.list_catalogs().</li>
<li>url: The prefix of a url to a IVOA Cone Search Service. Must end
in either ? or &amp;.</li>
<li>A VOSCatalog instance: A specific catalog manually downloaded
and selected from the database using the APIs in the
STScI vo.vos_catalog module.</li>
<li>Any of the above 3 options combined in a list, in which case
they are tried in order.</li>
</ul>
</div></blockquote>
<dl class="docutils">
<dt><em>pedantic</em> [ bool ]</dt>
<dd>When pedantic is True, raise an error when the returned VOTable
file violates the spec, otherwise issue a warning.</dd>
<dt><em>ra</em> [ float ]</dt>
<dd>A right-ascension in the ICRS coordinate system for the position
of the center of the cone to search, given in decimal degrees.</dd>
<dt><em>dec</em> [ float ]</dt>
<dd>A declination in the ICRS coordinate system for the position of
the center of the cone to search, given in decimal degrees.</dd>
<dt><em>radius</em> [ float]</dt>
<dd>The radius of the cone to search, given in decimal degrees.</dd>
<dt><em>verb</em> [ int ]</dt>
<dd>Verbosity, 1, 2, or 3, indicating how many columns are to be
returned in the resulting table. Support for this parameter by a
Cone Search service implementation is optional. If the service
supports the parameter, then when the value is 1, the response
should include the bare minimum of columns that the provider
considers useful in describing the returned objects. When the
value is 3, the service should return all of the columns that are
available for describing the objects. A value of 2 is intended for
requesting a medium number of columns between the minimum and
maximum (inclusive) that are considered by the provider to most
typically useful to the user. When the verb parameter is not
provided, the server should respond as if verb = 2. If the verb
parameter is not supported by the service, the service should
ignore the parameter and should always return the same columns for
every request.</dd>
</dl>
<p>Additional keyword arguments may be provided to pass along to the
server. These arguments are specific to the particular catalog being
queried.</p>
</div></blockquote>
</dd></dl>

<dl class="function">
<dt id="atpy.irsa_service.read">
<tt class="descclassname">atpy.irsa_service.</tt><tt class="descname">read</tt><big>(</big><em>self</em>, <em>spatial</em>, <em>catalog</em>, <em>objstr=None</em>, <em>radius=None</em>, <em>units='arcsec'</em>, <em>size=None</em>, <em>polygon=None</em><big>)</big><a class="headerlink" href="#atpy.irsa_service.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Query the NASA/IPAC Infrared Science Archive (IRSA)</p>
<p>Required Arguments:</p>
<blockquote>
<div><dl class="docutils">
<dt><em>spatial</em> [ &#8216;Cone&#8217; | &#8216;Box&#8217; | &#8216;Polygon&#8217; ]</dt>
<dd>The type of query to execute</dd>
<dt><em>catalog</em> [ string ]</dt>
<dd>One of the catalogs listed by <tt class="docutils literal"><span class="pre">atpy.irsa_service.list_catalogs()</span></tt></dd>
</dl>
</div></blockquote>
<p>Optional Keyword Arguments:</p>
<blockquote>
<div><dl class="docutils">
<dt><em>objstr</em> [ str ]</dt>
<dd>This string gives the position of the center of the cone or box if
performing a cone or box search. The string can give coordinates
in various coordinate systems, or the name of a source that will
be resolved on the server (see <a class="reference external" href="http://irsa.ipac.caltech.edu/search_help.html">here</a> for more
details). Required if spatial is &#8216;Cone&#8217; or &#8216;Box&#8217;.</dd>
<dt><em>radius</em> [ float ]</dt>
<dd>The radius for the cone search. Required if spatial is &#8216;Cone&#8217;</dd>
<dt><em>units</em> [ &#8216;arcsec&#8217; | &#8216;arcmin&#8217; | &#8216;deg&#8217; ]</dt>
<dd>The units for the cone search radius. Defaults to &#8216;arcsec&#8217;.</dd>
<dt><em>size</em> [ float ]</dt>
<dd>The size of the box to search in arcseconds. Required if spatial
is &#8216;Box&#8217;.</dd>
<dt><em>polygon</em> [ list of tuples ]</dt>
<dd>The list of (ra, dec) pairs, in decimal degrees, outlinining the
polygon to search in. Required if spatial is &#8216;Polygon&#8217;</dd>
</dl>
</div></blockquote>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="index.html">ATpy v0.9.4 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2009, Eli Bressert and Thomas Robitaille.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.7.
    </div>
  </body>
</html>